/**
 * jQuery Dice
 *
 * @author Christian Hanne <mail@christianhanne.de>
 * @link http://www.christianhanne.de
 * @version 0.9.0
 */
(function(e){e.fn.dice=function(t){var n=e.extend({numPlayers:1,numDices:1,maxSpots:6,trickReaction:"reroll",rollDice:function(){return parseInt(Math.random()*n.maxSpots,10)}},t);var r=function(t){if(!t.hasClass("dice-click")){return}var r=0;e(".dice-player",t).not(".processed").each(function(){var t=0;e(".dice-player-dices-dice",this).not(".processed").each(function(){var r=n.rollDice();e(this).addClass("processed").html(r);t+=r});e(this).addClass("dice-player-result-"+t);e(".dice-player-result",this).html(t);e(this).addClass("processed");if(t>r){r=t}});i(t,r)};var i=function(t,i){if(n.trickReaction=="reroll"&&e(".dice-player-result-"+i,t).size()>1){e(".dice-player-result-"+i,t).removeClass("processed");e(".dice-player-result-"+i,t).removeClass(".dice-player-result-"+i);e(".dice-player-result-"+i+" .dice-player-dices-dice",t).removeClass("processed");r(t)}else{e(".dice-player-result-"+i,t).addClass("dice-winner");t.removeClass("dice-click")}};return this.each(function(){e(this).addClass("dice dice-click");for(var t=0;t<n.numPlayers;t++){var i=e("<div/>").addClass("dice-player dice-player-"+t);e("<div/>").addClass("dice-player-name").html("Player "+(t+1)).appendTo(i);e("<span/>").addClass("dice-player-result").appendTo(e(".dice-player-name",i));e("<div/>").addClass("dice-player-dices").appendTo(i);for(var s=0;s<n.numDices;s++){e("<div/>").addClass("dice-player-dices-dice dice-player-dices-dice-"+s).appendTo(e(".dice-player-dices",i))}i.appendTo(e(this))}e(this).click(function(){r(e(this))})})}})(jQuery)